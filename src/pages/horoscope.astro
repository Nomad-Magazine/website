---
import Layout, { type SEOProps } from '~/layouts/Layout.astro'
import HoroscopeIsland from '~/components/HoroscopeIsland.astro'
import HoroscopeLoader from '~/components/HoroscopeLoader.astro'

const { url } = Astro
const shouldGenerate = url.searchParams.get('generate') === 'true'
const name = url.searchParams.get('name') ?? undefined
const birthdate = url.searchParams.get('birthdate') ?? undefined

const seo: SEOProps = {
  title: 'Digital Nomad Horoscope | Nomad Magazine',
  description: 'Discover your nomadic destiny with our specialized horoscope for digital nomads. Get personalized astrological insights for your travel and work adventures.',
  image: `${Astro.site}images/187987f5-e9fc-4a74-b6ef-304b3d4a92e2.webp`,
  keywords: 'nomad horoscope, digital nomad astrology, travel horoscope, nomad destiny, astrological insights',
}
---

<Layout seo={seo}>
  <div class="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex flex-col items-center justify-center p-4">
    <HoroscopeIsland 
      server:defer 
      shouldGenerate={shouldGenerate}
      name={name}
      birthdate={birthdate}
    >
      <HoroscopeLoader slot="fallback" />
    </HoroscopeIsland>
    
    <!-- Footer Info -->
    <div class="text-center mt-8">
      <p class="text-purple-200">
        Want more nomad insights? 
        <a href="/blog/" class="text-yellow-400 hover:text-yellow-300 underline">
          Read our blog
        </a>
        or
        <a href="/editions/" class="text-yellow-400 hover:text-yellow-300 underline">
          get the magazine
        </a>
      </p>
    </div>
  </div>
</Layout> 
